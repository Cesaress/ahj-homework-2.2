(()=>{"use strict";class e{constructor(){this.columnTodo=document.querySelector(".todo"),this.columnInProgress=document.querySelector(".in_progress"),this.columnDone=document.querySelector(".done")}static renderingTextTask(e,t){const o=document.createElement("DIV"),n=document.createElement("P");o.classList.add("task"),n.classList.add("task_text"),n.textContent=t,e.querySelector(".add_card").parentNode.insertBefore(o,e.querySelector(".add_card")),o.prepend(n)}static renderingImg(e,t,o){const n=document.createElement("DIV"),s=document.createElement("IMG"),r=document.createElement("P");n.classList.add("task"),s.classList.add("task-image"),s.classList.add("picture"),r.classList.add("task_text"),s.src=o,r.textContent=t,e.querySelector(".add_card").parentNode.insertBefore(n,e.querySelector(".add_card")),n.prepend(r),n.prepend(s)}defaultContent(e){return e===this.columnTodo?["Welcome to Trello!","This is a card","Click on a card what's behind it"]:e===this.columnInProgress?["Invite your time to this board using the Add Members button","Drag people onto a card to indicate that they're responsible for it"]:e===this.columnDone?["To learn more tricks, check out the guide","Use as many boards as you want. We'll make more!"]:null}actionDefault(){this.defaultContent(this.columnTodo).forEach((t=>{e.renderingTextTask(this.columnTodo,t)})),e.renderingImg(this.columnTodo,"You can attach pictures and files","assets/879c132429fd8d8eb57a63100fb87569.png"),this.defaultContent(this.columnInProgress).forEach((t=>{e.renderingTextTask(this.columnInProgress,t)})),this.defaultContent(this.columnDone).forEach((t=>{e.renderingTextTask(this.columnDone,t)}))}actionStorage(t){t.toDo.forEach((t=>{e.renderingTextTask(this.columnTodo,t)})),t.inProgress.forEach((t=>{e.renderingTextTask(this.columnInProgress,t)})),t.done.forEach((t=>{e.renderingTextTask(this.columnDone,t)}))}}console.log("app.js is bunled");const t=new e,o=new class{constructor(){this.storage=localStorage}save(e){this.storage.setItem("dataTrello",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("dataTrello"))}catch(e){throw new Error("Invalid data")}}statusChange(e,t){const o=this.load();for(const n in o)n===e&&(o[n].status=t);this.save(o)}remove(){let e=this.load();e={},this.save(e)}},n=o.load(),s={};null===n||void 0===n.toDo?t.actionDefault():t.actionStorage(n);const r=document.querySelector(".save_button");let d;document.querySelector(".reset_button").addEventListener("click",(()=>{Array.from(document.querySelectorAll(".task")).forEach((e=>{e.remove()})),o.remove(),t.actionDefault()})),r.addEventListener("click",(()=>{const e=Array.from(document.querySelector(".todo").querySelectorAll(".task_text")),t=Array.from(document.querySelector(".in_progress").querySelectorAll(".task_text")),n=Array.from(document.querySelector(".done").querySelectorAll(".task_text"));s.toDo=[],s.inProgress=[],s.done=[],e.forEach((e=>{s.toDo.push(e.textContent)})),t.forEach((e=>{s.inProgress.push(e.textContent)})),n.forEach((e=>{s.done.push(e.textContent)})),o.save(s)}));const c=e=>{const{target:t}=e;if(d.style.top=e.clientY-20+"px",d.style.left=e.clientX-50+"px",t.classList.contains("task")||t.classList.contains("title")){const{y:o,height:n}=t.getBoundingClientRect(),s=function(e){const t=document.createElement("div"),{width:o,height:n}=e.getBoundingClientRect();return t.classList.add("shadow_element"),t.style.width=`${o}px`,t.style.height=`${n}px`,t}(document.querySelector(".dragged"));let r;o+n/2>e.clientY&&!t.classList.contains("title")&&(document.querySelector(".shadow_element")&&document.querySelector(".shadow_element").remove(),r=e.target.previousElementSibling.closest(".task")||e.target.previousElementSibling.closest("h1"),r&&r.insertAdjacentElement("afterend",s)),o+n/2<e.clientY&&(document.querySelector(".shadow_element")&&document.querySelector(".shadow_element").remove(),r=e.target.nextElementSibling.closest(".task")||e.target.nextElementSibling.closest(".add_card"),r&&r.insertAdjacentElement("beforebegin",s))}},l=e=>{const t=e.targetTouches[0],{target:o}=e;d.style.top=t.pageY-20+"px",d.style.left=t.pageX-50+"px",t.pageX+20<o.closest(".column").offsetLeft&&o.closest(".task").remove()};document.querySelectorAll(".add_card").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),class{constructor(){this.todo=[],this.inProgress=[],this.done=[]}addCard(e,t){"todo"===t&&this.todo.push(e),"in-progress"===t&&this.inProgress.push(e),"done"===t&&this.done.push(e)}deleteCard(e,t){"todo"===t&&(this.todo=this.todo.filter((t=>t.id!==e))),"in-progress"===t&&(this.inProgress=this.inProgress.filter((t=>t.id!==e))),"done"===t&&(this.done=this.done.filter((t=>t.id!==e)))}addChCard(e,t,o){if("todo"===o){let o=this.todo.find((t=>t.id===e.id&&t.title===e.title)),n=this.todo.indexOf(o);this.todo.splice(n,0,t)}if("in-progress"===o){let o=this.inProgress.find((t=>t.id===e.id&&t.title===e.title)),n=this.inProgress.indexOf(o);this.inProgress.splice(n,0,t)}if("done"===o){let o=this.done.find((t=>t.id===e.id&&t.title===e.title)),n=this.done.indexOf(o);this.done.splice(n,0,t)}}getTodo(){return this.todo}getInProgress(){return this.inProgress}getDone(){return this.done}}(e),e.remove(e)}))}));const i=e=>{const t=e.target.closest(".task");if(t){const e=t.closest(".column"),o=function(){const e=document.createElement("div");return e.classList.add("closed_element"),e.textContent="â•³",e}(),{width:n}=t.getBoundingClientRect();o.style.top=`${t.offsetTop+2}px`,o.style.left=n+t.offsetLeft-17+"px",e.querySelector(".closed_element")||(o.addEventListener("click",(()=>{t.remove(),o.remove()})),e.insertAdjacentElement("afterbegin",o))}document.querySelector(".closed_element")&&!t&&e.target!==document.querySelector(".closed_element")&&document.querySelector(".closed_element").remove()},a=e=>{const t=e.target.closest(".column");if(e.target.classList.contains("shadow_element")){const e=t.querySelector(".shadow_element");t.insertBefore(d,e)}d.style.width=null,d.style.height=null,d.classList.remove("dragged"),d=void 0,document.querySelector(".shadow_element")&&document.querySelector(".shadow_element").remove(),document.documentElement.removeEventListener("mousemove",c),document.documentElement.removeEventListener("mouseup",a),document.documentElement.removeEventListener("touchmove",l),document.documentElement.removeEventListener("touchend",a),document.addEventListener("mousemove",i),document.addEventListener("touchmove",i)};document.addEventListener("mousemove",i),document.addEventListener("touchmove",i);const u=Array.from(document.querySelectorAll(".column"));u.forEach((e=>e.addEventListener("mousedown",(e=>{if(e.target.closest(".task")){e.preventDefault(),d=e.target.closest(".task");const{width:t,height:o}=d.getBoundingClientRect();d.classList.add("dragged"),document.removeEventListener("mousemove",i),document.querySelector(".closed_element")&&document.querySelector(".closed_element").remove(),d.style.width=`${t}px`,d.style.height=`${o}px`,document.documentElement.addEventListener("mousemove",c),document.documentElement.addEventListener("mouseup",a)}})))),u.forEach((e=>e.addEventListener("touchstart",(e=>{if(e.target.closest(".task")){e.preventDefault(),d=e.target.closest(".task");const{width:t,height:o}=d.getBoundingClientRect();d.classList.add("dragged"),document.removeEventListener("touchmove",i),document.querySelector(".closed_element")&&document.querySelector(".closed_element").remove(),d.style.width=`${t}px`,d.style.height=`${o}px`,document.documentElement.addEventListener("touchmove",l),document.documentElement.addEventListener("touchend",a)}}))))})();
//# sourceMappingURL=main.js.map